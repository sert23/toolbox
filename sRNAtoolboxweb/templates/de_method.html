{#{% extends 'base.html' %}#}
{#{% extends 'photos/base.html' %}#}
{% extends "base.html" %}

 <style>
    @media (min-width: 768px) {
{#    @media (min-width: 768px) {#}
      .modal-xl {
        width: 200%;
          height: 300%;
       max-width:1200px;
      }
    }
</style>

{% load staticfiles %}
{% load render_table from django_tables2 %}
{% block content %}



{#{% load static %}#}

<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">


{% block modals %}
    {% include "Messages/bench/Choose_input.html" %}
    {% include "Messages/bench/sRNAbenchInput.html" %}
    {% include "Messages/bench/Species_dropdown.html" %}
    {% include "Messages/bench/library_mode.html" %}
    {% include "Messages/bench/other_ncrnas.html" %}
    {% include "Messages/bench/guess_Adapter.html" %}
    {% include "Messages/bench/minimum_adapter_length.html" %}
    {% include "Messages/bench/mismatches_adapter.html" %}
    {% include "Messages/bench/quality_filter.html" %}
    {% include "Messages/bench/phred_encode.html" %}
    {% include "Messages/bench/mirna_species.html" %}
    {% include "Messages/bench/Not_profile.html" %}
    {% include "Messages/bench/RecursiveAdaptorTrimming.html" %}
    {% include "Messages/bench/speciesBench.html" %}
    {% include "Messages/bench/UploadUserFiles.html" %}
    {% include "Messages/bench/mirnas.html" %}

{#    Protocols      #}
    {% include "Messages/protocols/Illumina.html" %}
    {% include "Messages/protocols/NEB.html" %}
    {% include "Messages/protocols/Bioo.html" %}
    {% include "Messages/protocols/Smarter.html" %}
    {% include "Messages/protocols/Qiagen.html" %}
    {% include "Messages/protocols/Custom.html" %}


{% endblock %}

    {% block javascript %}
{#        <script src="{% static 'js/plugins/dataTables/jquery.dataTables.js' %}"></script>#}
{#    <script src="{% static 'js/plugins/dataTables/dataTables.bootstrap.js' %}"></script>#}
{#    <script src="{% static 'js/jquery-3.1.1.min.js' %}"></script>#}
{#    <script src="{% static 'js/bootstrap.min.js' %}"></script>#}
  {# JQUERY FILE UPLOAD SCRIPTS #}
        <script src="/srnatoolbox/static/js/plotly-latest.min.js"></script>
  <script src="{% static 'js/jquery-file-upload/vendor/jquery.ui.widget.js' %}"></script>
  <script src="{% static 'js/jquery-file-upload/jquery.iframe-transport.js' %}"></script>
  <script src="{% static 'js/jquery-file-upload/jquery.fileupload.js' %}"></script>

  <script src="/static/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
  <script src="/static/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
  <script src="/static/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
  <script src="/static/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
  <script src="/static/vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
  <script src="/static/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
  <script src="/static/vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>

{#<script src="http://cdn.datatables.net/plug-ins/1.10.12/api/processing().js"></script>#}

{% endblock %}

{% block js %}

    <script>
    $(document).ready(function(){
    $('a[href="#{{ init_tab }}"]').tab('show');
    {#$('a[href="#General"]').tab('show');#}

});

    </script>
<script src="{% static 'js/plugins/dataTables/jquery.dataTables.js' %}"></script>
<script src="{% static 'js/plugins/dataTables/dataTables.bootstrap.js' %}"></script>
<script>
    $('table').each(function() {
        if (this.id != "notformattable"){
            console.log(this.id);
            $(this).dataTable();
        }
    });
</script>

{% endblock %}

{#    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>#}
{#      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>#}
{#    <script src="{% static 'js/jquery-3.1.1.min.js' %}"></script>#}
{#    <script src="{% static 'js/bootstrap.min.js' %}"></script>#}

<!-- Modal -->
<div class="modal fade" id="spinner" tabindex="-1" role="dialog" aria-labelledby="spinnerLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-body">
          <img style="display:block; margin-left:auto; margin-right:auto; width:50%;" src="{% static 'gif/Multibench_spinner.gif' %}">
        </div>
      </div>
    </div>
</div>

  {# PHOTOS PAGE SCRIPTS #}
{#  <script src="{% static 'photos/js/progress-bar-upload.js' %}"></script>#}

    <div id="page-wrapper">
        <div class="row">
        <div class="col-lg-12">

        <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" href="#collapseOne">{{ DE_method }} results </a>
            </h4>

        </div>
        <div id="collapseOne" class="panel-collapse collapse in">
            <div class="panel-body">
            <div style="margin-bottom: 20px;">

            <ul class="nav nav-pills" id="myTab">

{#            <li><a href="#Summary" data-toggle="tab">Summary</a>#}
{#                    </li>#}

                {% for tab_title, tab_id in sections %}
                    <li><a href="#{{ tab_id }}" data-toggle="tab">{{ tab_title }}</a>
                    </li>
                {% endfor %}
            </ul>

            <div class="tab-content">
{#            <div class="tab-pane fade in active" id="Summary">#}
{##}
{#                    <div class="col-lg-12">#}
{##}
{#                        <p> Summary</p>#}
{#                    {% include "summary.html" %}#}
{#                        </div>#}
{#                </div>#}

                {% for tab_title, tab_id in sections %}
                <div class="tab-pane fade active" id="{{ tab_id }}">
                <br>

                    <div class="col-lg-12">
                    <br>
                    {% if hm_list %}
                        {% for img, hm_button ,title, hm, name, mat_link, hm_path ,section in hm_list %}
                            {% if section == tab_title %}
                <div class="col-lg-12">
    {#                <a href="{{ MEDIA_URL }}{{ img  }}"  > <img src="{{ MEDIA_URL }}{{ img  }}"  alt="Heat Map" style="width:100%;height:100%" /> </a>#}
{#                    <h3 align="center"> {{ name }}  </h3>#}
                <h4> {{ title }}  </h4>
                    {% if hm_button %}
                        <a href="javascript:void(0)" > <button type="button" id="hm_img{{ forloop.counter }}" class="btn btn-primary">See heatmap</button> </a>
                    {% else %}
                        <a href="javascript:void(0)" ><img id="hm_img{{ forloop.counter }}" src="{{ img  }}" alt="img" style="width:100%;height:100%;padding:1px;border:thin solid black;"  /> </a>
                    {% endif %}

{#                    <a href="{{ hm }}" ><img id="hm_img{{ forloop.counter }}" src="{{ img  }}" alt="img" style="width:100%;height:100%;padding:1px;border:thin solid black;"  /> </a>#}
                </div>
                    <div class="modal" id="modal_test_hm{{ forloop.counter }}" tabindex="-1" role="dialog" aria-labelledby="label" aria-hidden="true">
        {#	    <div class="modal-dialog" role="document">#}
                        <style>
                            @media (min-width: 768px) {
                        {#    @media (min-width: 768px) {#}
                              .modal-xl {
                                width: 200%;
                                  height: 300%;
                               max-width:1200px;
                              }
                            }
                        </style>
                <div class="modal-dialog modal-xl">
                  <div class="modal-content" >
                    <div class="modal-body" >

{#                                <h3 align="center"> {{ name }}  </h3>#}
{#                        <iframe width="1150" height="1000" src="{{ hm }}"></iframe>#}
                             <div class="row">
                                 <div class="text-center">
{#                                 <div class="large-2 push-5 columns"> #}
                             <h2> {{ title }}  </h2>
                            {{ hm|safe }}
                                 </div>
                             </div>
                                <a href="{{ mat_link }}" download><h4>Download input matrix</h4></a>
                                <a href="{{ hm_path }}" download><h4>Download heatmap in html format</h4></a>
                            <!-- Plotly chart will be drawn inside this DIV -->
        {#	          <img style="display:block; margin-left:auto; margin-right:auto; width:100%;" src="{{ MEDIA_URL }}{{ sumimgs.0  }}">#}
        {#	          <h1 style="text-align: center;">hello there</h1>#}
                    </div>
                  </div>
                </div>
            </div>


        <script>
            $('#hm_img{{ forloop.counter }}').click(function() {
             $("#modal_test_hm{{ forloop.counter }}").modal('show');
        {#     alert("this is a test");#}
    {#         if (!document.getElementById("{{ div_id }}")){#}
    {#             $('#empty_div_mir{{ forloop.counter }}').append('{{ plot|escapejs }}');#}
    {#         }#}
            });


    {#     Plotly.relayout( "{{ div_id }}", { 'xaxis.autorange': true, 'yaxis.autorange': true });#}

    </script>
                {% endif %}
            {% endfor %}
            {% endif %}

                    {% for plot, section in multiboxplots %}
                        {% if section == tab_title %}
                            <div class="col-lg-12">
                            {{ plot|safe }}
                            </div>
                        {% endif %}
                        {% endfor %}
                    {% for stable, section in table_list %}
                        {% if section == tab_title %}
                        <h4> {{ stable.name }}  </h4>
                        {% render_table stable.content %}
                        {% endif %}
                    {% endfor %}

                    {% if plot_list %}

                        {% for img,name,section in plot_list %}
                            {% if section == tab_title %}
                <div class="col-lg-6">
    {#                <a href="{{ MEDIA_URL }}{{ img  }}"  > <img src="{{ MEDIA_URL }}{{ img  }}"  alt="Heat Map" style="width:100%;height:100%" /> </a>#}
                    <h3 align="center"> {{ name }}  </h3>
                    <a href="javascript:void(0)" ><img id="mir_img{{ forloop.counter }}" src="{{ img  }}" alt="img" style="width:100%;height:100%;padding:1px;border:thin solid black;"  /> </a>

                </div>
                    <div class="modal" id="modal_test_mir{{ forloop.counter }}" tabindex="-1" role="dialog" aria-labelledby="label" aria-hidden="true">
        {#	    <div class="modal-dialog" role="document">#}
                <div class="modal-dialog modal-xl" role="document">
                  <div class="modal-content" >
                    <div class="modal-body" >
                                <h3 align="center"> {{ name }}  </h3>
                             <img src="{{ img  }}"  alt="Heat Map" style="width:100%;height:100%" />

                            <!-- Plotly chart will be drawn inside this DIV -->
        {#	          <img style="display:block; margin-left:auto; margin-right:auto; width:100%;" src="{{ MEDIA_URL }}{{ sumimgs.0  }}">#}
        {#	          <h1 style="text-align: center;">hello there</h1>#}
                    </div>
                  </div>
                </div>
            </div>


        <script>
            $('#mir_img{{ forloop.counter }}').click(function() {
             $("#modal_test_mir{{ forloop.counter }}").modal('show');
        {#     alert("this is a test");#}
    {#         if (!document.getElementById("{{ div_id }}")){#}
    {#             $('#empty_div_mir{{ forloop.counter }}').append('{{ plot|escapejs }}');#}
    {#         }#}
            });


    {#     Plotly.relayout( "{{ div_id }}", { 'xaxis.autorange': true, 'yaxis.autorange': true });#}

    </script>
                {% endif %}
            {% endfor %}
                    {% endif %}


                        </div>
                </div>
                {% endfor %}
            </div>

    {#            <table id="jobs" class="table table-striped table-bordered bulk_action"></table>#}


            </div>


            </div>

        </div>
        </div>
        </div>
        </div>
    </div>

{#{% block photos_content %}#}




{% endblock %}

